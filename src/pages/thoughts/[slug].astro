---
import ThoughtLayout from "../../layouts/ThoughtLayout.astro";
import { getThoughtContent } from "../../lib/notion";
import { renderNotionBlocks } from "../../lib/notionRenderer";

export const prerender = false;

const { slug } = Astro.params;

if (!slug) {
  return Astro.redirect("/404");
}

const thought = await getThoughtContent(slug);

if (!thought) {
  return Astro.redirect("/404");
}

const contentHtml = renderNotionBlocks(thought.content);
---

<ThoughtLayout
  title={thought.title}
  date={thought.date}
  showcase={thought.showcase}
>
  <Fragment set:html={contentHtml} />
</ThoughtLayout>
