---
import Logo from "../components/elements/Logo.astro";
import bgImage from "../assets/bgtest.jpg";

interface Props {
  title?: string;
}

const { title = "Karina Tovar" } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <title>{title}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital,wght@0,400;0,500;0,600;1,400;1,500;1,600&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="root">
      <main class="main">
        <nav class="nav">
          <div class="nav-container">
            <a href="/" class="nav-home">
              <Logo classes="w-10 h-10" />
            </a>
            <div class="nav-links">
              <a href="/about">About</a>
              <a href="/work">Work</a>
              <a href="/thoughts">Thoughts</a>
            </div>
          </div>
          <div class="nav-fade"></div>
        </nav>

        <div class="content">
          <slot />
        </div>
      </main>

      <footer class="footer">
        <div class="footer-content">
          <span class="footer-text">Shine, constantly and steadily.</span>
          <span class="footer-year">2024</span>
          <div class="footer-clock-wrapper">
            <div class="clock" aria-hidden="true">
              <div class="hand second"></div>
              <div class="hand minute"></div>
              <div class="hand hour"></div>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </body>
</html>

<script>
  function updateClock() {
    const now = new Date();
    const seconds = now.getSeconds();
    const minutes = now.getMinutes();
    const hours = now.getHours();

    document.documentElement.style.setProperty("--now-s", seconds.toString());
    document.documentElement.style.setProperty("--now-m", minutes.toString());
    document.documentElement.style.setProperty("--now-h", hours.toString());
  }

  setInterval(updateClock, 1000);
  updateClock();
</script>

<style define:vars={{ bgImage }}>
  :root {
    --font-sans: "Safiro", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
      Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
    --footer-height: 60px;
  }

  body,
  html {
    @apply min-h-screen;
  }
  .root {
    @apply antialiased bg-paper-base text-ink-primary;
    font-family: var(--font-sans);
    /*
    background-image: url('/src/assets/bgtest.jpg');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    */
  }

  .main {
    @apply mx-auto max-w-2xl px-6 pb-10 flex flex-col justify-center items-center;
    min-height: calc(100vh - var(--footer-height));
  }

  .nav {
    @apply w-full flex flex-col justify-between items-center sticky top-0;
  }

  .nav-container {
    @apply flex items-center justify-between w-full bg-paper-base pt-10 pb-2;
  }

  .nav-home {
    @apply text-neutral-900 font-medium flex items-center justify-center;
  }

  .nav-links {
    @apply flex items-center gap-6;
  }

  .nav-links a {
    @apply text-neutral-600 underline-offset-4 transition-all;
    @apply hover:text-neutral-900 hover:underline;
  }

  .nav-fade {
    @apply w-full h-8 bg-gradient-to-t from-paper-base to-transparent rotate-180;
  }

  .content {
    @apply max-w-none;
  }

  /* Typography */
  :global(h1) {
    @apply text-[100px] leading-[90px] font-medium tracking-tight font-instrument-serif mb-8;
  }

  :global(h2) {
    @apply text-xl font-medium tracking-tight mt-12 mb-4;
  }

  :global(p) {
    @apply leading-relaxed mb-6;
  }

  :global(em) {
    @apply font-normal not-italic text-neutral-900;
  }

  /* Global styles */
  :global(body) {
    @apply text-base leading-relaxed;
  }

  :global(a) {
    @apply text-inherit underline-offset-4;
  }

  :global(em) {
    @apply text-inherit italic;
  }

  :global(*) {
    @apply border-neutral-200;
  }

  /* Footer styles */
  .footer {
    @apply flex justify-center items-center;
    height: var(--footer-height);
  }

  .footer-content {
    @apply flex items-center gap-3 text-sm text-neutral-500;
  }

  .footer-text {
    @apply font-normal;
  }

  .footer-year {
    @apply font-mono;
  }

  /* Clock styles */
  .clock {
    @apply relative w-4 h-4 rounded-full border border-neutral-200;
  }

  .hand {
    @apply absolute top-1/2 left-1/2 origin-left bg-neutral-400;
    width: 35%;
    height: 1px;
  }

  .second {
    transform: rotate(calc(var(--now-s) * 6deg));
    @apply bg-neutral-300;
  }

  .minute {
    transform: rotate(calc(var(--now-m) * 6deg));
    @apply bg-neutral-400;
  }

  .hour {
    transform: rotate(calc(var(--now-h) * 30deg));
    width: 25%;
    @apply bg-neutral-500;
  }

  /* Update footer spacing */
  .content {
    @apply mb-auto;
  }
</style>
